{
  "version": 3,
  "sources": ["../plugin/index.ts", "../plugin/lib/constant.ts", "../plugin/lib/util.ts", "../plugin/mkcert/index.ts", "../plugin/lib/logger.ts", "../plugin/mkcert/config.ts", "../plugin/lib/request.ts", "../plugin/mkcert/downloader.ts", "../plugin/mkcert/record.ts", "../plugin/mkcert/source.ts", "../plugin/mkcert/version.ts"],
  "sourcesContent": ["import { createLogger, type PluginOption } from 'vite'\r\n\r\nimport { PLUGIN_NAME } from './lib/constant'\r\nimport { getDefaultHosts } from './lib/util'\r\nimport Mkcert, { MkcertOptions } from './mkcert'\r\n\r\nexport { BaseSource, type SourceInfo } from './mkcert/source'\r\n\r\nexport type ViteCertificateOptions = MkcertOptions & {\r\n  /**\r\n   * The hosts that needs to generate the certificate.\r\n   */\r\n  hosts?: string[]\r\n}\r\n\r\nconst plugin = (options: ViteCertificateOptions = {}): PluginOption => {\r\n  return {\r\n    name: PLUGIN_NAME,\r\n    apply: 'serve',\r\n    config: async ({ server = {}, logLevel }) => {\r\n      if (server.https === false) {\r\n        return\r\n      }\r\n\r\n      const { hosts = [], ...mkcertOptions } = options\r\n\r\n      const logger = createLogger(logLevel, {\r\n        prefix: PLUGIN_NAME\r\n      })\r\n      const mkcert = Mkcert.create({\r\n        logger,\r\n        ...mkcertOptions\r\n      })\r\n\r\n      await mkcert.init()\r\n\r\n      const allHosts = [...getDefaultHosts(), ...hosts]\r\n\r\n      if (typeof server.host === 'string') {\r\n        allHosts.push(server.host)\r\n      }\r\n\r\n      const uniqueHosts = Array.from(new Set(allHosts)).filter(item => !!item)\r\n\r\n      const certificate = await mkcert.install(uniqueHosts)\r\n\r\n      return {\r\n        server: {\r\n          https: {\r\n            ...certificate\r\n          }\r\n        },\r\n        preview: {\r\n          https: {\r\n            ...certificate\r\n          }\r\n        }\r\n      }\r\n    }\r\n  }\r\n}\r\n\r\nexport default plugin\r\n", "import os from 'os'\r\nimport path from 'path'\r\n\r\nexport const PKG_NAME = 'vite-plugin-mkcert'\r\n\r\nexport const PLUGIN_NAME = PKG_NAME.replace(/-/g, ':')\r\n\r\nexport const PLUGIN_DATA_DIR = path.join(os.homedir(), `.${PKG_NAME}`)\r\n", "import child_process, { ExecOptions } from 'child_process'\r\nimport crypto from 'crypto'\r\nimport fs from 'fs'\r\nimport os from 'os'\r\nimport path from 'path'\r\nimport util from 'util'\r\n\r\nimport { PLUGIN_DATA_DIR } from './constant'\r\n\r\n/**\r\n * Check if file exists\r\n *\r\n * @param filePath file path\r\n * @returns does the file exist\r\n */\r\nexport const exists = async (filePath: string) => {\r\n  try {\r\n    await fs.promises.access(filePath)\r\n    return true\r\n  } catch (error) {\r\n    return false\r\n  }\r\n}\r\n\r\n/**\r\n * Resolve file path with `PLUGIN_DATA_DIR`\r\n *\r\n * @param fileName file name\r\n * @returns absolute path\r\n */\r\nexport const resolvePath = (fileName: string) => {\r\n  return path.resolve(PLUGIN_DATA_DIR, fileName)\r\n}\r\n\r\nexport const mkdir = async (dirname: string) => {\r\n  const isExist = await exists(dirname)\r\n\r\n  if (!isExist) {\r\n    await fs.promises.mkdir(dirname, { recursive: true })\r\n  }\r\n}\r\n\r\nexport const ensureDirExist = async (filePath: string) => {\r\n  const dirname = path.dirname(filePath)\r\n  await mkdir(dirname)\r\n}\r\n\r\nexport const readFile = async (filePath: string) => {\r\n  const isExist = await exists(filePath)\r\n  return isExist ? (await fs.promises.readFile(filePath)).toString() : undefined\r\n}\r\n\r\nexport const writeFile = async (\r\n  filePath: string,\r\n  data: string | Uint8Array\r\n) => {\r\n  await ensureDirExist(filePath)\r\n  await fs.promises.writeFile(filePath, data)\r\n  await fs.promises.chmod(filePath, 0o777)\r\n}\r\n\r\nexport const exec = async (cmd: string, options?: ExecOptions) => {\r\n  return await util.promisify(child_process.exec)(cmd, options)\r\n}\r\n\r\n/**\r\n * http://nodejs.cn/api/os/os_networkinterfaces.html\r\n */\r\nconst isIPV4 = (family: string | number) => {\r\n  return family === 'IPv4' || family === 4\r\n}\r\n\r\nexport const getLocalV4Ips = () => {\r\n  const interfaceDict = os.networkInterfaces()\r\n  const addresses: string[] = []\r\n  for (const key in interfaceDict) {\r\n    const interfaces = interfaceDict[key]\r\n    if (interfaces) {\r\n      for (const item of interfaces) {\r\n        if (isIPV4(item.family)) {\r\n          addresses.push(item.address)\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  return addresses\r\n}\r\n\r\nexport const getDefaultHosts = () => {\r\n  return ['localhost', ...getLocalV4Ips()]\r\n}\r\n\r\nexport const getHash = async (filePath: string) => {\r\n  const content = await readFile(filePath)\r\n\r\n  if (content) {\r\n    const hash = crypto.createHash('sha256')\r\n    hash.update(content)\r\n    return hash.digest('hex')\r\n  }\r\n\r\n  return undefined\r\n}\r\n\r\nconst isObj = (obj: any) =>\r\n  Object.prototype.toString.call(obj) === '[object Object]'\r\n\r\nconst mergeObj = (target: any, source: any) => {\r\n  if (!(isObj(target) && isObj(source))) {\r\n    return target\r\n  }\r\n\r\n  for (const key in source) {\r\n    if (Object.prototype.hasOwnProperty.call(source, key)) {\r\n      const targetValue = target[key]\r\n      const sourceValue = source[key]\r\n\r\n      if (isObj(targetValue) && isObj(sourceValue)) {\r\n        mergeObj(targetValue, sourceValue)\r\n      } else {\r\n        target[key] = sourceValue\r\n      }\r\n    }\r\n  }\r\n}\r\n\r\nexport const deepMerge = (target: any, ...source: any[]) => {\r\n  return source.reduce((a, b) => mergeObj(a, b), target)\r\n}\r\n\r\nexport const prettyLog = (obj?: Record<string, any>) => {\r\n  return JSON.stringify(obj, null, 2)\r\n}\r\n\r\nexport const escape = (path?: string) => {\r\n  return `\"${path}\"`\r\n}\r\n", "import fs from 'fs'\r\nimport process from 'process'\r\n\r\nimport pc from 'picocolors'\r\nimport { Logger } from 'vite'\r\n\r\nimport { debug } from '../lib/logger'\r\nimport {\r\n  ensureDirExist,\r\n  escape,\r\n  exec,\r\n  exists,\r\n  getHash,\r\n  prettyLog,\r\n  resolvePath\r\n} from '../lib/util'\r\n\r\nimport Config from './config'\r\nimport Downloader from './downloader'\r\nimport Record from './record'\r\nimport { BaseSource, GithubSource, CodingSource } from './source'\r\nimport VersionManger from './version'\r\n\r\nexport type SourceType = 'github' | 'coding' | BaseSource\r\n\r\nexport type MkcertOptions = {\r\n  /**\r\n   * Whether to force generate\r\n   */\r\n  force?: boolean\r\n\r\n  /**\r\n   * Automatically upgrade mkcert\r\n   *\r\n   * @default false\r\n   */\r\n  autoUpgrade?: boolean\r\n\r\n  /**\r\n   * Specify mkcert download source\r\n   *\r\n   * @default github\r\n   */\r\n  source?: SourceType\r\n\r\n  /**\r\n   * If your network is restricted, you can specify a local binary file instead of downloading\r\n   *\r\n   * @description it should be absolute path\r\n   * @default none\r\n   */\r\n  mkcertPath?: string\r\n}\r\n\r\nexport type MkcertProps = MkcertOptions & {\r\n  logger: Logger\r\n}\r\n\r\nconst KEY_FILE_PATH = resolvePath('certs/dev.key')\r\nconst CERT_FILE_PATH = resolvePath('certs/dev.pem')\r\n\r\nclass Mkcert {\r\n  private force?: boolean\r\n  private autoUpgrade?: boolean\r\n  private mkcertLocalPath?: string\r\n  private source: BaseSource\r\n  private logger: Logger\r\n\r\n  private mkcertSavedPath: string\r\n  private sourceType: SourceType\r\n\r\n  private config: Config\r\n\r\n  public static create(options: MkcertProps) {\r\n    return new Mkcert(options)\r\n  }\r\n\r\n  private constructor(options: MkcertProps) {\r\n    const { force, autoUpgrade, source, mkcertPath, logger } = options\r\n\r\n    this.force = force\r\n    this.logger = logger\r\n    this.autoUpgrade = autoUpgrade\r\n    this.mkcertLocalPath = mkcertPath\r\n    this.sourceType = source || 'github'\r\n\r\n    if (this.sourceType === 'github') {\r\n      this.source = GithubSource.create()\r\n    } else if (this.sourceType === 'coding') {\r\n      this.source = CodingSource.create()\r\n    } else {\r\n      this.source = this.sourceType\r\n    }\r\n\r\n    this.mkcertSavedPath = resolvePath(\r\n      process.platform === 'win32' ? 'mkcert.exe' : 'mkcert'\r\n    )\r\n\r\n    this.config = new Config()\r\n  }\r\n\r\n  private async getMkcertBinnary() {\r\n    return (await this.checkMkcert())\r\n      ? this.mkcertLocalPath || this.mkcertSavedPath\r\n      : undefined\r\n  }\r\n\r\n  /**\r\n   * Check if mkcert exists\r\n   */\r\n  private async checkMkcert() {\r\n    let exist: boolean\r\n    if (this.mkcertLocalPath) {\r\n      exist = await exists(this.mkcertLocalPath)\r\n      if (!exists) {\r\n        this.logger.error(\r\n          pc.red(\r\n            `${this.mkcertLocalPath} does not exist, please check the mkcertPath paramter`\r\n          )\r\n        )\r\n      }\r\n    } else {\r\n      exist = await exists(this.mkcertSavedPath)\r\n    }\r\n    return exist\r\n  }\r\n\r\n  private async getCertificate() {\r\n    const key = await fs.promises.readFile(KEY_FILE_PATH)\r\n    const cert = await fs.promises.readFile(CERT_FILE_PATH)\r\n\r\n    return {\r\n      key,\r\n      cert\r\n    }\r\n  }\r\n\r\n  private async createCertificate(hosts: string[]) {\r\n    const names = hosts.join(' ')\r\n\r\n    const mkcertBinnary = await this.getMkcertBinnary()\r\n\r\n    if (!mkcertBinnary) {\r\n      debug(\r\n        `Mkcert does not exist, unable to generate certificate for ${names}`\r\n      )\r\n    }\r\n\r\n    await ensureDirExist(KEY_FILE_PATH)\r\n    await ensureDirExist(CERT_FILE_PATH)\r\n\r\n    const cmd = `${escape(mkcertBinnary)} -install -key-file ${escape(\r\n      KEY_FILE_PATH\r\n    )} -cert-file ${escape(CERT_FILE_PATH)} ${names}`\r\n\r\n    await exec(cmd, {\r\n      env: {\r\n        ...process.env,\r\n        JAVA_HOME: undefined\r\n      }\r\n    })\r\n\r\n    this.logger.info(\r\n      `The certificate is saved in:\\n${KEY_FILE_PATH}\\n${CERT_FILE_PATH}`\r\n    )\r\n  }\r\n\r\n  private getLatestHash = async () => {\r\n    return {\r\n      key: await getHash(KEY_FILE_PATH),\r\n      cert: await getHash(CERT_FILE_PATH)\r\n    }\r\n  }\r\n\r\n  private async regenerate(record: Record, hosts: string[]) {\r\n    await this.createCertificate(hosts)\r\n\r\n    const hash = await this.getLatestHash()\r\n\r\n    record.update({ hosts, hash })\r\n  }\r\n\r\n  public async init() {\r\n    await this.config.init()\r\n\r\n    const exist = await this.checkMkcert()\r\n\r\n    if (!exist) {\r\n      await this.initMkcert()\r\n    } else if (this.autoUpgrade) {\r\n      await this.upgradeMkcert()\r\n    }\r\n  }\r\n\r\n  private async getSourceInfo() {\r\n    const sourceInfo = await this.source.getSourceInfo()\r\n\r\n    if (!sourceInfo) {\r\n      if (typeof this.sourceType === 'string') {\r\n        this.logger.error(\r\n          'Failed to request mkcert information, please check your network'\r\n        )\r\n        if (this.sourceType === 'github') {\r\n          this.logger.info(\r\n            'If you are a user in china, maybe you should set \"source\" paramter to \"coding\"'\r\n          )\r\n        }\r\n      } else {\r\n        this.logger.info(\r\n          'Please check your custom \"source\", it seems to return invalid result'\r\n        )\r\n      }\r\n      return undefined\r\n    }\r\n\r\n    return sourceInfo\r\n  }\r\n  private async initMkcert() {\r\n    const sourceInfo = await this.getSourceInfo()\r\n\r\n    debug('The mkcert does not exist, download it now')\r\n\r\n    if (!sourceInfo) {\r\n      this.logger.error(\r\n        'Can not obtain download information of mkcert, init skipped'\r\n      )\r\n      return\r\n    }\r\n\r\n    await this.downloadMkcert(sourceInfo.downloadUrl, this.mkcertSavedPath)\r\n  }\r\n\r\n  private async upgradeMkcert() {\r\n    const versionManger = new VersionManger({ config: this.config })\r\n    const sourceInfo = await this.getSourceInfo()\r\n\r\n    if (!sourceInfo) {\r\n      this.logger.error(\r\n        'Can not obtain download information of mkcert, update skipped'\r\n      )\r\n      return\r\n    }\r\n\r\n    const versionInfo = versionManger.compare(sourceInfo.version)\r\n\r\n    if (!versionInfo.shouldUpdate) {\r\n      debug('Mkcert is kept latest version, update skipped')\r\n      return\r\n    }\r\n\r\n    if (versionInfo.breakingChange) {\r\n      debug(\r\n        'The current version of mkcert is %s, and the latest version is %s, there may be some breaking changes, update skipped',\r\n        versionInfo.currentVersion,\r\n        versionInfo.nextVersion\r\n      )\r\n      return\r\n    }\r\n\r\n    debug(\r\n      'The current version of mkcert is %s, and the latest version is %s, mkcert will be updated',\r\n      versionInfo.currentVersion,\r\n      versionInfo.nextVersion\r\n    )\r\n\r\n    await this.downloadMkcert(sourceInfo.downloadUrl, this.mkcertSavedPath)\r\n    versionManger.update(versionInfo.nextVersion)\r\n  }\r\n\r\n  private async downloadMkcert(sourceUrl: string, distPath: string) {\r\n    const downloader = Downloader.create()\r\n    await downloader.download(sourceUrl, distPath)\r\n  }\r\n\r\n  public async renew(hosts: string[]) {\r\n    const record = new Record({ config: this.config })\r\n\r\n    if (this.force) {\r\n      debug(`Certificate is forced to regenerate`)\r\n\r\n      await this.regenerate(record, hosts)\r\n    }\r\n\r\n    if (!record.contains(hosts)) {\r\n      debug(\r\n        `The hosts changed from [${record.getHosts()}] to [${hosts}], start regenerate certificate`\r\n      )\r\n\r\n      await this.regenerate(record, hosts)\r\n      return\r\n    }\r\n\r\n    const hash = await this.getLatestHash()\r\n\r\n    if (record.tamper(hash)) {\r\n      debug(\r\n        `The hash changed from ${prettyLog(record.getHash())} to ${prettyLog(\r\n          hash\r\n        )}, start regenerate certificate`\r\n      )\r\n\r\n      await this.regenerate(record, hosts)\r\n      return\r\n    }\r\n\r\n    debug('Neither hosts nor hash has changed, skip regenerate certificate')\r\n  }\r\n\r\n  /**\r\n   * Get certificates\r\n   *\r\n   * @param hosts host collection\r\n   * @returns cretificates\r\n   */\r\n  public async install(hosts: string[]) {\r\n    if (hosts.length) {\r\n      await this.renew(hosts)\r\n    }\r\n\r\n    return await this.getCertificate()\r\n  }\r\n}\r\n\r\nexport default Mkcert\r\n", "import Debug from 'debug'\r\n\r\nimport { PLUGIN_NAME } from './constant'\r\n\r\nexport const debug = Debug(PLUGIN_NAME)\r\n", "import { debug } from '../lib/logger'\r\nimport {\r\n  resolvePath,\r\n  readFile,\r\n  writeFile,\r\n  prettyLog,\r\n  deepMerge\r\n} from '../lib/util'\r\n\r\nexport type RecordMate = {\r\n  /**\r\n   * The hosts that have generated certificate\r\n   */\r\n  hosts: string[]\r\n\r\n  /**\r\n   * file hash\r\n   */\r\n  hash?: RecordHash\r\n}\r\n\r\nexport type RecordHash = {\r\n  key?: string\r\n  cert?: string\r\n}\r\n\r\nconst CONFIG_FILE_NAME = 'config.json'\r\nconst CONFIG_FILE_PATH = resolvePath(CONFIG_FILE_NAME)\r\n\r\nclass Config {\r\n  /**\r\n   * The mkcert version\r\n   */\r\n  private version: string | undefined\r\n\r\n  private record: RecordMate | undefined\r\n\r\n  public async init() {\r\n    const str = await readFile(CONFIG_FILE_PATH)\r\n    const options = str ? JSON.parse(str) : undefined\r\n\r\n    if (options) {\r\n      this.version = options.version\r\n      this.record = options.record\r\n    }\r\n  }\r\n\r\n  private async serialize() {\r\n    await writeFile(CONFIG_FILE_PATH, prettyLog(this))\r\n  }\r\n\r\n  // deep merge\r\n  public async merge(obj: Record<string, any>) {\r\n    const currentStr = prettyLog(this)\r\n\r\n    deepMerge(this, obj)\r\n\r\n    const nextStr = prettyLog(this)\r\n\r\n    debug(\r\n      `Receive parameter ${prettyLog(\r\n        obj\r\n      )}, then update config from ${currentStr} to ${nextStr}`\r\n    )\r\n\r\n    await this.serialize()\r\n  }\r\n\r\n  public getRecord() {\r\n    return this.record\r\n  }\r\n\r\n  public getVersion() {\r\n    return this.version\r\n  }\r\n}\r\n\r\nexport default Config\r\n", "import axios from 'axios'\r\n\r\nimport { debug } from './logger'\r\n\r\nconst request = axios.create()\r\n\r\nrequest.interceptors.response.use(\r\n  res => {\r\n    return res\r\n  },\r\n  error => {\r\n    debug('Request error: %o', error)\r\n    return Promise.reject(error)\r\n  }\r\n)\r\n\r\nexport default request\r\n", "import { debug } from '../lib/logger'\r\nimport request from '../lib/request'\r\nimport { writeFile } from '../lib/util'\r\n\r\nclass Downloader {\r\n  public static create() {\r\n    return new Downloader()\r\n  }\r\n\r\n  private constructor() {}\r\n\r\n  public async download(downloadUrl: string, savedPath: string) {\r\n    debug('Downloading the mkcert executable from %s', downloadUrl)\r\n\r\n    const { data } = await request.get(downloadUrl, {\r\n      responseType: 'arraybuffer'\r\n    })\r\n\r\n    await writeFile(savedPath, data)\r\n\r\n    debug('The mkcert has been saved to %s', savedPath)\r\n  }\r\n}\r\n\r\nexport default Downloader\r\n", "import Config, { RecordHash, RecordMate } from './config'\r\n\r\nexport type RecordProps = {\r\n  config: Config\r\n}\r\nclass Record {\r\n  private config: Config\r\n\r\n  constructor(options: RecordProps) {\r\n    this.config = options.config\r\n  }\r\n\r\n  public getHosts() {\r\n    return this.config.getRecord()?.hosts\r\n  }\r\n\r\n  public getHash() {\r\n    return this.config.getRecord()?.hash\r\n  }\r\n\r\n  public contains(hosts: string[]) {\r\n    const oldHosts = this.getHosts()\r\n\r\n    if (!oldHosts) {\r\n      return false\r\n    }\r\n\r\n    // require hosts is subset of oldHosts\r\n    for (const host of hosts) {\r\n      if (!oldHosts.includes(host)) {\r\n        return false\r\n      }\r\n    }\r\n\r\n    return true\r\n  }\r\n\r\n  // whether the files has been tampered with\r\n  public tamper(hash: RecordHash) {\r\n    const oldHash = this.getHash()\r\n\r\n    if (!oldHash) {\r\n      return false\r\n    }\r\n\r\n    if (oldHash.key === hash.key && oldHash.cert === hash.cert) {\r\n      return false\r\n    }\r\n\r\n    return true\r\n  }\r\n\r\n  public async update(record: RecordMate) {\r\n    await this.config.merge({ record })\r\n  }\r\n}\r\n\r\nexport default Record\r\n", "import { Octokit } from '@octokit/rest'\r\n\r\nimport request from '../lib/request'\r\n\r\nexport type SourceInfo = {\r\n  version: string\r\n  downloadUrl: string\r\n}\r\n\r\nexport abstract class BaseSource {\r\n  abstract getSourceInfo(): Promise<SourceInfo | undefined>\r\n\r\n  protected getPlatformIdentifier() {\r\n    switch (process.platform) {\r\n      case 'win32':\r\n        return 'windows-amd64.exe'\r\n      case 'linux':\r\n        return process.arch === 'arm64'\r\n          ? 'linux-arm64'\r\n          : process.arch === 'arm'\r\n          ? 'linux-arm'\r\n          : 'linux-amd64'\r\n      case 'darwin':\r\n        return 'darwin-amd64'\r\n      default:\r\n        throw new Error('Unsupported platform')\r\n    }\r\n  }\r\n}\r\n\r\n/**\r\n * Download mkcert from github.com\r\n */\r\nexport class GithubSource extends BaseSource {\r\n  public static create() {\r\n    return new GithubSource()\r\n  }\r\n\r\n  private constructor() {\r\n    super()\r\n  }\r\n\r\n  public async getSourceInfo(): Promise<SourceInfo | undefined> {\r\n    const octokit = new Octokit()\r\n    const { data } = await octokit.repos.getLatestRelease({\r\n      owner: 'FiloSottile',\r\n      repo: 'mkcert'\r\n    })\r\n    const platformIdentifier = this.getPlatformIdentifier()\r\n\r\n    const version = data.tag_name\r\n    const downloadUrl = data.assets.find(item =>\r\n      item.name.includes(platformIdentifier)\r\n    )?.browser_download_url\r\n\r\n    if (!(version && downloadUrl)) {\r\n      return undefined\r\n    }\r\n\r\n    return {\r\n      downloadUrl,\r\n      version\r\n    }\r\n  }\r\n}\r\n\r\n/**\r\n * Download mkcert from coding.net\r\n *\r\n * @see {https://help.coding.net/openapi}\r\n */\r\nexport class CodingSource extends BaseSource {\r\n  public static CODING_API = 'https://e.coding.net/open-api'\r\n  public static CODING_AUTHORIZATION =\r\n    'token 000f7831ec425079439b0f55f55c729c9280d66e'\r\n  public static CODING_PROJECT_ID = 8524617\r\n  public static REPOSITORY = 'mkcert'\r\n\r\n  public static create() {\r\n    return new CodingSource()\r\n  }\r\n\r\n  private constructor() {\r\n    super()\r\n  }\r\n\r\n  private async request(data: any) {\r\n    return request({\r\n      data,\r\n      method: 'POST',\r\n      url: CodingSource.CODING_API,\r\n      headers: {\r\n        Authorization: CodingSource.CODING_AUTHORIZATION\r\n      }\r\n    })\r\n  }\r\n\r\n  /**\r\n   * Get filename of Coding.net artifacts\r\n   *\r\n   * @see https://liuweigl.coding.net/p/github/artifacts/885241/generic/packages\r\n   *\r\n   * @returns name\r\n   */\r\n  private getPackageName() {\r\n    return `mkcert-${this.getPlatformIdentifier()}`\r\n  }\r\n\r\n  async getSourceInfo(): Promise<SourceInfo | undefined> {\r\n    /**\r\n     * @see https://help.coding.net/openapi#e2106ec64e75af66f188463b1bb7e165\r\n     */\r\n    const { data: VersionData } = await this.request({\r\n      Action: 'DescribeArtifactVersionList',\r\n      ProjectId: CodingSource.CODING_PROJECT_ID,\r\n      Repository: CodingSource.REPOSITORY,\r\n      Package: this.getPackageName(),\r\n      PageSize: 1\r\n    })\r\n\r\n    const version = VersionData.Response.Data.InstanceSet[0]?.Version\r\n\r\n    if (!version) {\r\n      return undefined\r\n    }\r\n\r\n    /**\r\n     * @see https://help.coding.net/openapi#63ad6bc7469373cef575e92bb92be71e\r\n     */\r\n    const { data: FileData } = await this.request({\r\n      Action: 'DescribeArtifactFileDownloadUrl',\r\n      ProjectId: CodingSource.CODING_PROJECT_ID,\r\n      Repository: CodingSource.REPOSITORY,\r\n      Package: this.getPackageName(),\r\n      PackageVersion: version\r\n    })\r\n\r\n    const downloadUrl = FileData.Response.Url\r\n\r\n    if (!downloadUrl) {\r\n      return undefined\r\n    }\r\n\r\n    return {\r\n      downloadUrl,\r\n      version\r\n    }\r\n  }\r\n}\r\n", "import { debug } from '../lib/logger'\r\n\r\nimport Config from './config'\r\n\r\nexport type VersionMangerProps = {\r\n  config: Config\r\n}\r\n\r\nconst parseVersion = (version: string) => {\r\n  const str = version.trim().replace(/v/i, '')\r\n\r\n  return str.split('.')\r\n}\r\n\r\nclass VersionManger {\r\n  private config: Config\r\n\r\n  public constructor(props: VersionMangerProps) {\r\n    this.config = props.config\r\n  }\r\n\r\n  public async update(version: string) {\r\n    try {\r\n      await this.config.merge({ version })\r\n    } catch (err) {\r\n      debug('Failed to record mkcert version info: %o', err)\r\n    }\r\n  }\r\n\r\n  public compare(version: string) {\r\n    const currentVersion = this.config.getVersion()\r\n\r\n    if (!currentVersion) {\r\n      return {\r\n        currentVersion,\r\n        nextVersion: version,\r\n        breakingChange: false,\r\n        shouldUpdate: true\r\n      }\r\n    }\r\n\r\n    let breakingChange = false\r\n    let shouldUpdate = false\r\n\r\n    const newVersion = parseVersion(version)\r\n    const oldVersion = parseVersion(currentVersion)\r\n\r\n    for (let i = 0; i < newVersion.length; i++) {\r\n      if (newVersion[i] > oldVersion[i]) {\r\n        shouldUpdate = true\r\n        breakingChange = i === 0\r\n        break\r\n      }\r\n    }\r\n    return {\r\n      breakingChange,\r\n      shouldUpdate,\r\n      currentVersion,\r\n      nextVersion: version\r\n    }\r\n  }\r\n}\r\n\r\nexport default VersionManger\r\n"],
  "mappings": "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",
  "names": ["path", "os", "import_os", "import_path", "fs", "path", "util", "child_process", "os", "crypto", "import_fs", "Debug", "axios", "process", "pc", "fs"]
}
